# Git & Best Practices for Project Phase

## Introduction

Version control is essential for collaborative software development. While Git is the most popular version control system, other tools like [GitLab](https://about.gitlab.com/), [BitBucket](https://bitbucket.org/product/), [Mercurial](https://www.mercurial-scm.org/), and [CVS](https://nongnu.org/cvs/) offer alternatives. Here, we’ll focus on Git conventions and tools that can help coordinate group projects effectively.

## Commit Messages

Effective commit messages enhance project clarity and history tracking. Follow these best practices:

- **Imperative Mood:** Write commit messages in the imperative mood (e.g., "Fix bug" rather than "Fixed bug"). This aligns with messages generated by Git commands like `git merge` and `git revert`.
- **Message Structure:** Use a clear and concise subject line, followed by a detailed body if necessary.

**Simple Commit Message:**

```sh
git commit -m "Fix issue with user authentication"
```

**Detailed Commit Message:**

```sh
git commit
```

This will open your default text editor (often [Vim](https://stackoverflow.com/questions/6098742/using-git-commit-a-with-vim)) for a more detailed message.

For enforcing commit message conventions, consider tools like [Commitizen](https://github.com/commitizen/cz-cli) to ensure consistency.

## Branching

Branching helps manage different features and updates without disrupting the main codebase.

- **Creating a Branch:**

```sh
git checkout -b feature-branch
```

- **Merging a Branch:**

```sh
git pull origin master  # Update local master with latest changes
git checkout feature-branch
git merge master
git push origin feature-branch
```

- **Handling Merge Conflicts:** Use `git status` to identify conflicts. Resolve them in your code editor (e.g., VS Code’s [merge conflict interface](https://code.visualstudio.com/Docs/editor/versioncontrol#_merge-conflicts)), then commit the resolved changes.

- **Pull Requests:** Create a Pull Request on GitHub to propose merging your changes. Request reviews to ensure code quality before merging. Reviewers can comment, approve, or request changes.

- **Post-Merge Cleanup:** After merging, delete the branch to keep your repository clean:

```sh
git branch -d feature-branch  # Delete branch locally
git push origin --delete feature-branch  # Delete branch on GitHub
```

## Branch Protection

Protect your main branches to ensure code quality and stability:

- **Require Pull Request Reviews:** Enable settings to require code reviews before merging.
- **Enforce Status Checks:** Ensure that code passes automated tests and linting checks before merging.
- **Restrict Merge Permissions:** Limit who can merge into protected branches to maintain code integrity.

## Rebasing

Rebasing is an alternative to merging that can help maintain a cleaner commit history.

- **Basic Rebase Workflow:**

```sh
git checkout feature-branch
git fetch origin
git rebase origin/master
```

- **Handling Rebase Conflicts:** Resolve conflicts as you would with merge conflicts. Use `git rebase --continue` after resolving each conflict.

For a comparison of merging and rebasing, check out [Atlassian's guide](https://www.atlassian.com/git/tutorials/merging-vs-rebasing).

## Enforcing Repository Rules

### ESLint

Use [ESLint](https://eslint.org/docs/user-guide/getting-started) to maintain code quality and consistency.

- **Install ESLint:**

```sh
npm install eslint --save-dev
```

- **Initialize ESLint:**

```sh
npx eslint --init
```

- **Choose a Style Guide:** Popular options include Airbnb’s style guide, especially for React projects. Adjust rules as needed.

### Git Hooks with Husky

[Husky](https://github.com/typicode/husky) enables you to add Git hooks to enforce rules before commits and pushes.

- **Install Husky:**

```sh
npm install husky --save-dev
npx husky install
npm set-script prepare "husky install"
```

- **Create Pre-commit Hook:**

```sh
npx husky add .husky/pre-commit "npm test"
```

- **Add Multiple Scripts:**

```sh
npx husky add .husky/pre-commit "npm test && eslint ./ --fix"
```

This setup ensures that tests and linting checks pass before allowing commits.

By adhering to these practices, you’ll maintain a high-quality codebase and streamline your development process, especially in collaborative environments.

## Additional Resources
- [Git - The Simple Guide](https://rogerdudler.github.io/git-guide/)
- [Git - Branches in a Nutshell](https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell)
- [Git - Rebasing](https://git-scm.com/book/en/v2/Git-Branching-Rebasing)
- [Git - Rebasing vs Merging](https://www.atlassian.com/git/tutorials/merging-vs-rebasing)
